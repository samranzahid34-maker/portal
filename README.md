# üéì Student Marks Portal (Authentication + MongoDB)

A secure, professional web application for students to view their marks from Google Sheets, featuring Registration, Login, and an Admin Dashboard.

## üöÄ Key Features
- **Secure Authentication**: Student Registration & Login (Roll No + Email).
- **Single Admin Architecture**: Restricted to one administrator per deployment for security.
- **MongoDB Cloud Storage**: All data (registrations, admins, sheet configs) is stored securely in MongoDB Atlas.
- **Google Sheets Integration**: Pulls marks live from multiple Google Sheets.
- **Admin Dashboard**: Manage allowed Sheets, view connection status, and test student lookups.
- **Fuzzy Search**: Handles Roll Number formatting differences automatically.

## üõ†Ô∏è How to Run Locally

1.  **Install Dependencies**:
    ```bash
    npm install
    ```
2.  **Setup Environment**:
    - Ensure `credentials.json` (Google Service Account) is in the root folder.
    - Create a `.env` file with:
      ```env
      JWT_SECRET=your_secret_key
      MONGODB_URI=your_mongodb_connection_string # REQUIRED
      # GOOGLE_CREDENTIALS_JSON=... (Optional for cloud deployment)
      ```
3.  **Start Server**:
    ```bash
    npm run start-auth
    ```
    - Student Portal: [http://localhost:3000](http://localhost:3000)
    - Admin Dashboard: [http://localhost:3000/admin.html](http://localhost:3000/admin.html)

## ‚òÅÔ∏è How to Deploy to Vercel

1.  **Push to GitHub**:
    - Create a new Repository on GitHub.
    - Push this code.

2.  **Deploy on Vercel**:
    - Import the GitHub Project in Vercel.
    - **Add Environment Variables** (Critical):
        - `MONGODB_URI`: Your MongoDB Connection String.
        - `JWT_SECRET`: A random secure password.
        - `GOOGLE_CREDENTIALS_JSON`: The content of your `credentials.json` file pasted as a string.

## üìä How to Add New Google Sheets

1.  **Login to Admin Dashboard** (`/admin.html`).
2.  **Click "Add New Source"**.
3.  **Enter Details**:
    - **Description**: e.g., "Fall 2024 BSCS Final"
    - **Sheet ID**: Found in the Google Sheet URL: `docs.google.com/spreadsheets/d/THIS_LONG_ID/edit`
    - **Tab Name**: The exact name of the tab at the bottom (e.g., "Sheet1").
4.  **Important**: You MUST share the Google Sheet with the Service Account Email:
    `student-marks-portal@ml-student-mark-sheet.iam.gserviceaccount.com` (Viewer Access).

## üóÑÔ∏è Database Info
- **Storage**: Uses MongoDB Atlas exclusively.
- **Why?**: To ensure data persistence across deployments (like Vercel) where local files are ephemeral.
- **Collections**: `admins`, `registrations`, `sources`.

---
*Generated by Antigravity Agent*